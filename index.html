<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <script src="scripts.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyAq70AER3541hJOUhrj4GEBCs-ChkRNjog",
          authDomain: "slaskecards.firebaseapp.com",
          projectId: "slaskecards",
          storageBucket: "slaskecards.firebasestorage.app",
          messagingSenderId: "282880805544",
          appId: "1:282880805544:web:bd295dcb1fe0a5e5bb909d"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const email = "test@gmail.com"
        const password = "yoo123"

        createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed up 
                const user = userCredential.user;
                console.log(user);
                // ...
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                console.log(error.code);
                console.log(error.message);
                // ..
            });
        
        signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed in 
                const user = userCredential.user;
                // ...
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
            });
        
        onAuthStateChanged(auth, (user) => {
            if (user) {
            // User is signed in, see docs for a list of available properties
            // https://firebase.google.com/docs/reference/js/auth.user
            const uid = user.uid;
            // ...
            } else {
            // User is signed out
            // ...
            }
        });
                            
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/8983/8983569.png">
</head>
<body>
    <div id="buttonDiv"></div>

    <!-- Scoreboard -->
    <div id="scoreboard-container" style="display: none;">
        <div id="scoreboard">
            <p><span class="player-name">Player 1</span> Wins: <span id="score-player1">0</span></p>
            <p><span class="player-name">Player 2</span> Wins: <span id="score-player2">0</span></p>
        </div>
    </div>

    <button id="rules-btn" class="question-mark-btn">?</button>

    <div id="rules-container" class="hidden">
        <div id="rules-content">
            <button id="close-rules">Close</button>
            <h2>Game Rules</h2>
            
            <p><strong>Objective:</strong> Reduce your opponent's health to 0 by playing powerful hands.</p>
            
            <h3>Gameplay</h3>
            <ul>
                <li>Each player takes turns playing cards.</li>
                <li>Cards belong to one of four elements: Fire, Water, Earth, and Air.</li>
                <li>Upgrades can be purchased between rounds.</li>
            </ul>

            <h3>Damage Calculation</h3>
            <p>Your attack damage is based on poker hands. Each hand type has a multiplier:</p>
            <ul>
                <li><strong>High Card:</strong> Ã—1</li>
                <li><strong>Pair:</strong> Ã—2</li>
                <li><strong>Two Pair:</strong> Ã—2</li>
                <li><strong>Three of a Kind:</strong> Ã—3</li>
                <li><strong>Straight:</strong> Ã—4</li>
                <li><strong>Flush:</strong> Ã—4</li>
                <li><strong>Full House:</strong> Ã—4</li>
                <li><strong>Four of a Kind:</strong> Ã—7</li>
                <li><strong>Straight Flush:</strong> Ã—8</li>
                <li><strong>Royal Flush:</strong> Ã—10</li>
            </ul>
            <p><strong>Base damage</strong> is calculated from your card ranks and element modifiers.</p>
            <p><strong>Formula:</strong> (Sum of card values Ã— Element Modifier) Ã· 5 Ã— Multiplier.</p>

            <h3>Elemental Modifiers</h3>
            <p>If you have upgrades that boost a specific element, cards of that suit will deal extra damage.</p>

            <h3>How Money is Earned</h3>
            <ul>
                <li>Winning a round grants you <strong>gold</strong> based on the damage dealt.</li>
                <li>Higher poker hands = more damage = more gold.</li>
                <li>Gold can be spent on <strong>upgrades</strong> to improve your attacks.</li>
            </ul>

            <p>Good luck, and have fun!</p>
        </div>
    </div>



    
    <!-- Game screen -->
    <div id="game-container">
        <div id="game-setup">
            <label>Game ID: <input type="text" id="gameId"></label>
            <button onclick="createGame()">Create Game</button>
            <button onclick="joinGame()">Join Game</button>
        </div>
        <h2><span id="player-coins">ðŸª™0</span></h2>
        <div id="turn-indicator">Waiting for game to start...</div>
        <div class="health-bar-container">
            <div>
                <p>Player 1</p>
                <p id="player1-health">100/100</p>
                <div class="health-bar"><div id="health-player1" class="health-fill"></div></div>
            </div>
            <div>
                <p>Player 2</p>
                <p id="player2-health">100/100</p>
                <div class="health-bar"><div id="health-player2" class="health-fill"></div></div>
            </div>
        </div>
        <button id="play-hand-btn" onclick="playHand()" disabled>Play Hand</button>
        <button id="discard-btn" onclick="discard()" disabled>Discard (1)</button>
        <div id="card-container" class="card-container"></div>
        <div id="log"></div>
    </div>    
    
    <!-- Shop screen -->
    <div id="shop-container" style="display: none;">
        <h2>Upgrade Shop</h2>
        <p><span id="player-coins">ðŸª™0</span></p>
        <div id="shop-items" class="shop-upgrade-container"></div>
        <button onclick="leaveShop()">Continue to Next Game</button>
    </div>
    
    <!-- Upgrade container -->
    <div id="upgrade-container"></div>

</body>
</html>
